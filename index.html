<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>fs-tools - JavaScript Tools Collection</title>
  <link rel="stylesheet" href="libs/jquery-ui.min.css">
  <link rel="stylesheet" href="libs/logger.css">
  <script src="libs/jquery-3.7.1.min.js"></script>
  <script src="libs/jquery-ui.min.js"></script>
  <script src="libs/logger.js"></script>
  <script src="libs/tools.js"></script>

  <style>
    /* Global Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: #333;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header Styles */
    .header {
      text-align: center;
      color: white;
      margin-bottom: 40px;
    }

    .logo {
      width: 80px;
      height: 80px;
      margin: 0 auto 20px;
    }

    .logo img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .subtitle {
      font-size: 1.2rem;
      opacity: 0.9;
      margin-bottom: 20px;
    }

    /* Search Bar Styles */
    .search-container {
      margin: 20px auto;
      max-width: 600px;
      position: relative;
    }

    .search-input {
      width: 100%;
      padding: 12px 40px 12px 20px;
      border: none;
      border-radius: 30px;
      font-size: 1rem;
      outline: none;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transition: box-shadow 0.3s ease;
    }

    .search-input:focus {
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    }

    .search-icon {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #667eea;
      pointer-events: none;
    }

    /* Search Results */
    .no-results {
      text-align: center;
      color: white;
      padding: 40px 20px;
      font-size: 1.1rem;
    }

    .no-results-icon {
      font-size: 3rem;
      margin-bottom: 15px;
    }

    /* Tool Cards Styles */
    .tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      margin-bottom: 40px;
    }

    .tool-card {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      text-decoration: none;
      color: inherit;
      display: block;
    }

    .tool-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0,0,0,0.2);
    }

    .tool-icon {
      font-size: 3rem;
      margin-bottom: 15px;
      color: #667eea;
    }

    .tool-title {
      font-size: 1.5rem;
      margin-bottom: 10px;
      color: #333;
    }

    .tool-description {
      color: #666;
      margin-bottom: 15px;
    }

    .tool-link {
      display: inline-block;
      background: #667eea;
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      text-decoration: none;
      font-size: 0.9rem;
      transition: background 0.3s ease;
    }

    .tool-link:hover {
      background: #5a6fd8;
    }

    /* Author Info Styles */
    .author-info {
      text-align: center;
      color: rgba(255,255,255,0.8);
      margin: 20px 0;
      font-size: 0.9rem;
    }

    /* Footer Styles */
    .footer {
      text-align: center;
      color: rgba(255,255,255,0.7);
      padding: 30px 0;
      margin-top: 40px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }

    .footer p {
      margin: 5px 0;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }

      h1 {
        font-size: 2rem;
      }

      .tools-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .tool-card {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <img src="docs/pics/logo.svg" alt="fs-tools Logo">
      </div>
      <h1>fs-tools</h1>
      <p class="subtitle">JavaScript Tools Collection</p>
      <div class="search-container">
        <input type="text" id="search-input" class="search-input" placeholder="Search tools by ID, name or tags...">
        <span class="search-icon">ğŸ”</span>
      </div>
      <p class="author-info" id="author-info"></p>
    </header>

    <!-- Tools List -->
    <main>
      <div class="tools-grid">
        <!-- JMH Visualizer Tool -->
        <a href="tools/jmh-visualizer/jmh-visualizer.html" class="tool-card">
          <div class="tool-icon">ğŸ“Š</div>
          <h3 class="tool-title">JMH Benchmark Visualizer</h3>
          <p class="tool-description">Java Microbenchmark Harness performance test results visualization tool with multiple chart types and real-time data display.</p>
          <span class="tool-link">Get Started â†’</span>
        </a>

        <!-- Placeholder Tool 1 -->
        <div class="tool-card">
          <div class="tool-icon">ğŸ”§</div>
          <h3 class="tool-title">Code Formatter</h3>
          <p class="tool-description">Code formatting tool supporting multiple programming languages with unified code style specifications.</p>
          <span class="tool-link" style="background: #ccc; cursor: not-allowed;">In Development</span>
        </div>

        <!-- Placeholder Tool 2 -->
        <div class="tool-card">
          <div class="tool-icon">ğŸ“</div>
          <h3 class="tool-title">Documentation Generator</h3>
          <p class="tool-description">Automated project documentation generator supporting multiple formats and custom templates.</p>
          <span class="tool-link" style="background: #ccc; cursor: not-allowed;">In Development</span>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <p>Powered by fs-tools and <span id="footer-author"></span></p>
    </footer>
  </div>

  <script>
    // Display author information and tools using fs-tools.js
    $(document).ready(() => {
      // Check if fsLogger is loaded
      if (typeof fsLogger !== 'undefined') {
        fsLogger.debug('jQuery loaded:', typeof $ !== 'undefined');
        fsLogger.debug('fsTools loaded:', typeof fsTools !== 'undefined');
        fsLogger.debug('fsLogger loaded:', typeof fsLogger !== 'undefined');
      } else {
        console.log('jQuery loaded:', typeof $ !== 'undefined');
        console.log('fsTools loaded:', typeof fsTools !== 'undefined');
        console.log('fsLogger not loaded, using console.log');
      }

      // é»˜è®¤ä½œè€…ä¿¡æ¯ï¼ˆé™çº§æ–¹æ¡ˆï¼‰
      const defaultAuthor = 'sunqian, DeepSeek-V3.1';

      // å¼‚æ­¥è·å–index.htmlçš„ä½œè€…ä¿¡æ¯
      fsTools.getToolAuthorAsync('index.html', function(authorInfo) {
        if (typeof fsLogger !== 'undefined') {
          fsLogger.debug('Author info received for index.html:', authorInfo);
        } else {
          console.log('Author info received for index.html:', authorInfo);
        }
        // å¤„ç†å¯èƒ½çš„ç©ºä½œè€…ä¿¡æ¯ï¼Œä¸ºç©ºæ—¶ä½¿ç”¨é»˜è®¤ä½œè€…
        const finalAuthor = authorInfo || defaultAuthor;
        if (typeof fsLogger !== 'undefined') {
          fsLogger.debug('Setting author info:', finalAuthor);
        } else {
          console.log('Setting author info:', finalAuthor);
        }
        $('#author-info').text('Author: ' + finalAuthor);
        $('#footer-author').text(finalAuthor);
      });

      // ä»…åœ¨é¦–é¡µåŠ è½½æ‰€æœ‰å·¥å…·ä¿¡æ¯
      let allTools = [];

      fsTools.loadAllToolsInfo(function(tools) {
        if (typeof fsLogger !== 'undefined') {
          fsLogger.debug('Tools info loaded:', tools);
        } else {
          console.log('Tools info loaded:', tools);
        }

        if (tools && tools.length > 0) {
          // ä¿å­˜æ‰€æœ‰å·¥å…·ä¿¡æ¯
          allTools = tools.filter(tool => tool.id !== 'index.html');

          // åˆå§‹æ¸²æŸ“æ‰€æœ‰å·¥å…·
          renderTools(allTools);

          // å®ç°æœç´¢åŠŸèƒ½
          $('#search-input').on('input', function() {
            const searchTerm = $(this).val().toLowerCase().trim();
            const filteredTools = filterTools(allTools, searchTerm);
            renderTools(filteredTools);
          });
        } else {
          // å¦‚æœæ²¡æœ‰åŠ è½½åˆ°å·¥å…·ä¿¡æ¯ï¼Œä¸åšä»»ä½•æ“ä½œï¼Œä¿æŒé™æ€å†…å®¹
          if (typeof fsLogger !== 'undefined') {
            fsLogger.debug('No tools loaded, keeping static content');
          } else {
            console.log('No tools loaded, keeping static content');
          }
        }
      });

      // è¿‡æ»¤å·¥å…·çš„å‡½æ•°
      function filterTools(tools, searchTerm) {
        if (!searchTerm) {
          return tools; // å¦‚æœæœç´¢è¯ä¸ºç©ºï¼Œè¿”å›æ‰€æœ‰å·¥å…·
        }

        return tools.filter(tool => {
          // æœç´¢id
          const idMatch = tool.id.toLowerCase().includes(searchTerm);
          // æœç´¢åç§°
          const nameMatch = tool.name.toLowerCase().includes(searchTerm);
          // æœç´¢æ ‡ç­¾
          const tagsMatch = tool.tags && Array.isArray(tool.tags) &&
            tool.tags.some(tag => tag.toLowerCase().includes(searchTerm));

          // åªè¦æœ‰ä¸€ä¸ªåŒ¹é…å°±è¿”å›
          return idMatch || nameMatch || tagsMatch;
        });
      }

      // æ¸²æŸ“å·¥å…·åˆ—è¡¨çš„å‡½æ•°
      function renderTools(tools) {
        const toolsGrid = $('.tools-grid');
        toolsGrid.empty(); // æ¸…ç©ºç°æœ‰çš„å·¥å…·å¡ç‰‡

        if (tools.length === 0) {
          // æ˜¾ç¤ºæ²¡æœ‰ç»“æœçš„æç¤º
          const noResults = $('<div>')
            .addClass('no-results')
            .html(`
              <div class="no-results-icon">ğŸ”</div>
              <p>No tools found matching your search criteria.</p>
              <p>Try adjusting your search term.</p>
            `);
          toolsGrid.append(noResults);
          return;
        }

        // æ¸²æŸ“è¿‡æ»¤åçš„å·¥å…·åˆ—è¡¨
        tools.forEach(tool => {
          const toolCard = $('<a>')
            .attr('href', `tools/${tool.directory}/${tool.directory}.html`)
            .addClass('tool-card');

          const iconMap = {
            'jmh-visualizer': 'ğŸ“Š',
            'pixel-logo': 'ğŸ¨'
          };

          toolCard.html(`
            <div class="tool-icon">${iconMap[tool.id] || 'ğŸ”§'}</div>
            <h3 class="tool-title">${tool.name}</h3>
            <p class="tool-description">${tool.description}</p>
            <span class="tool-link">Get Started â†’</span>
          `);

          toolsGrid.append(toolCard);
        });
      }
    });
    </script>
</body>
</html>