<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pixel Logo Maker - fs-tools</title>
  <link rel="stylesheet" href="pixel-logo.css">
  <link rel="stylesheet" href="../../libs/jquery-ui.min.css">
  <link rel="stylesheet" href="../../libs/logger.css">
  <script src="../../libs/jquery-3.7.1.min.js"></script>
  <script src="../../libs/logger.js"></script>
  <script src="../../libs/tools.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <h1>Pixel Logo Maker</h1>
      <div class="toolbar">
        <div class="tool-group">
          <label for="canvasSize">Canvas Size:</label>
          <select id="canvasSize">
            <option value="16">16×16</option>
            <option value="32" selected>32×32</option>
            <option value="64">64×64</option>
          </select>
        </div>

        <div class="tool-group">
          <label for="colorPicker">Color:</label>
          <input type="color" id="colorPicker" value="#000000">
        </div>

        <div class="tool-group">
          <button id="pencilBtn" class="tool-btn active" title="Pencil">Pencil</button>
          <button id="eraserBtn" class="tool-btn" title="Eraser">Eraser</button>
          <button id="clearBtn" class="tool-btn" title="Clear Canvas">Clear</button>
        </div>

        <div class="tool-group">
          <button id="importBtn" class="tool-btn" title="Import Image">Import</button>
          <input type="file" id="imageInput" accept="image/*" style="display: none;">
        </div>
      </div>
    </header>

    <main>
      <div class="workspace">
        <div class="canvas-container">
          <canvas id="pixelCanvas"></canvas>
        </div>

        <div class="preview">
          <h3>Preview</h3>
          <div id="previewArea"></div>
        </div>
      </div>

      <div class="export-section">
        <h3>Export</h3>
        <div class="export-options">
          <button id="exportSvgBtn">Export as SVG</button>
          <button id="exportMarkdownBtn">Export as Markdown</button>
        </div>
        <div class="code-output">
          <textarea id="codeOutput" readonly placeholder="Generated code will appear here..."></textarea>
          <button id="copyBtn">Copy Code</button>
        </div>
      </div>
    </main>
  </div>

  <footer>
    <p>Powered by <strong>fs-tools</strong> and <span id="footer-author"></span></p>
  </footer>

  <script src="pixel-logo.js"></script>

  <script>
    // 显示页脚作者信息
    $(document).ready(() => {
      fsLogger.debug('jQuery loaded:', typeof $ !== 'undefined');
      fsLogger.debug('fsTools loaded:', typeof fsTools !== 'undefined');
      fsLogger.debug('fsLogger loaded:', typeof fsLogger !== 'undefined');

      // 默认作者信息（降级方案）
      const defaultAuthor = 'sunqian, DeepSeek-V3.1';

      // 只获取当前工具(pixel-logo)的作者信息，每个工具只获取一次并缓存
      fsTools.getToolAuthorAsync('pixel-logo', function(authorInfo) {
        fsLogger.debug('Author info received for pixel-logo:', authorInfo);
        // 处理可能的空作者信息，为空时使用默认作者
        const finalAuthor = authorInfo || defaultAuthor;
        fsLogger.debug('Setting author info:', finalAuthor);
        $('#footer-author').text(finalAuthor);
      });
    });
    </script>
</body>
</html>